<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymer/lib/utils/render-status.html">
<link rel="import" href="../../bower_components/lazy-imports/lazy-imports-mixin.html">

<dom-module id="ydc-app">
  <link  rel="lazy-import" group="lazy"  href="../ydc-pad/ydc-pad.html">
  <link  rel="lazy-import" group="lazy"  href="../ydc-palette/ydc-palette.html">
  <link  rel="lazy-import" group="lazy"  href="../ydc-pinceau/ydc-pinceau.html">
  <link  rel="lazy-import" group="lazy"  href="../ydc-menu/ydc-menu.html">
  <template>
    <style>
    :host {
      display: block;

    }
    /* minimal reset */
    * {
      margin: 0;
      padding: 0;
    }

    /* page styles */
    body {
      background: #ddd;
      font-family: sans-serif;
    }

    @media screen and (max-height: 650px) {
      #size-toolbar {
        display: none;
      }
    }

    @media screen and (max-height: 600px) {
      #color-toolbar {
        display: none;
      }
    }

    button {
      border: none;
      background: #aaa;
      width: 45px;
      height: 45px;
      border-radius: 30px;
      margin: 2px;
    }

    #container {
      width: 800px;
      margin: 1em auto 0;
    }

    #scratchpad {
      background: #eee;
      box-shadow: 0 0 20px #ccc;
      cursor: default;
    }

    #footer {
      margin-top: 1em;
      font-size: .6em;
      color: #888;
      text-align: center;
    }

    #footer a {
      color: #444;
    }
    </style>
    <h2>Hello [[prop1]]!</h2>

    <div id="container">
      <aside class="toolbar" id="size-toolbar">
      </aside>
      <div id="main">
        <canvas id="scratchpad" width="800" height="500"></canvas>
      </div>
      <aside class="toolbar" id="color-toolbar">
      </aside>

      <footer id="footer">


        <div><a href="#" id="download" download="image.png"><button align="center">Sauvegarder <br> l'image</button></a></div><br><br>

        Users connected: <span id="counter">?</span> &middot;
        Made by <a href="https://mrozwadowski.com/">MR</a> &middot;
        Fork me on <a href="https://github.com/hejmsdz/sketchpad">GitHub</a>
        Forked by scenaristeur at <a href="https://github.com/scenaristeur/sketchpad">Scenaristeur/sketchpad</a>
      </footer>
    </div>
    <ydc-canvas></ydc-canvas>
    <ydc-palette></ydc-palette>
    <ydc-pinceau></ydc-pinceau>
    <ydc-menu></ydc-menu>

  </template>
  <script src="/socket.io/socket.io.js"></script>
  <!--<script src="js/main.js"></script> -->
  <script>
  /**
  * @customElement
  * @polymer
  */
  class YdcApp extends Polymer.LazyImportsMixin(Polymer.Element) {
    static get is() { return 'ydc-app'; }
    static get properties() {
      return {
        prop1: {
          type: String,
          value: 'ydc-app'
        },
        io: {
          type: Object
        }
      };
    }
    constructor(){
      super();
      Polymer.RenderStatus.afterNextRender(this, function() {
        this._deferred();
      });
    }
    _deferred(){
      this.importLazyGroup('lazy').then((results) => {
        this.dispatchEvent(new CustomEvent('import-loaded', results));
      });
      this.io = io();
      console.log(this.io)
    }
  }

  window.customElements.define(YdcApp.is, YdcApp);
  </script>
</dom-module>
